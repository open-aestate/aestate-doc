(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{360:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"创建-template-模板表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-template-模板表"}},[t._v("#")]),t._v(" 创建 Template 模板表")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aestate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dbs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_mysql "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" tag\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aestate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("work"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Config "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MySqlConfig\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" aestate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("work"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Manage "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Pojo\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("table_template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Manage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Pojo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("kwargs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n        模板类对象\n        """')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个自增的主键id,并且不允许为空")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("intField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("primary_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auto_field"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" is_null"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'主键自增'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个创建时间,并设置`auto_time=True`,在第一次保存时可以为其设置默认为当前时间")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetimeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("auto_time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" is_null"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'创建时间'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个更新时间,并设置`update_auto_time=True`,保证每次修改都会更新为当前时间")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetimeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("update_auto_time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" is_null"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新实际按'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置config_obj未db_conf的对象,")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("table_template"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__init__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入配置类")]),t._v("\n            config_obj"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DatabaseConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置日志配置")]),t._v("\n            log_conf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存位置")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/log/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否允许保存日志")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'save_flag'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当日志到达多少MB时删除日志重新记录")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'max_clear'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必备的字段,每一个Pojo对象都必须包含一个`**kwargs`")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("kwargs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br")])]),s("h2",{attrs:{id:"配置解释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置解释"}},[t._v("#")]),t._v(" 配置解释")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("config_obj")]),t._v(" "),s("ul",[s("li",[t._v("导入我们前面的配置类,注意要实例化")])])]),t._v(" "),s("li",[s("p",[t._v("log_conf")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(":保存日志的位置")]),t._v(" "),s("li",[s("code",[t._v("save_flag")]),t._v(":是否要保存日志")]),t._v(" "),s("li",[s("code",[t._v("max_clear")]),t._v(":当日志到达多少时删除日志重新记录")])])]),t._v(" "),s("li",[s("p",[t._v("**kwargs")]),t._v(" "),s("ul",[s("li",[t._v("每个类表都需要携带"),s("code",[t._v("**kwargs")]),t._v("才可以进行初始化，因为例如 "),s("code",[t._v("Pojo(**kwargs).save()")]),t._v("方法中，需要在对象实例化时传入参数，如果要使用的话必须要在 "),s("code",[t._v("super().__init__")]),t._v("()中传入"),s("code",[t._v("**kwargs")]),t._v("。为了防止关于漏写发生不可预料的报错问题，建议每一个表对象都传"),s("code",[t._v("**kwargs")])])])])]),t._v(" "),s("h2",{attrs:{id:"字段设置-以-mysql-为示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字段设置-以-mysql-为示例"}},[t._v("#")]),t._v(" 字段设置(以 MYSQL 为示例)")]),t._v(" "),s("p",[t._v("首先从 "),s("code",[t._v("aestate.dbs._mysql")]),t._v(" 导入 "),s("code",[t._v("tag")]),t._v(" ,我们可以通过 ide 的提示看到,"),s("code",[t._v("tag")]),t._v("下包含非常多的字段类型,有:")]),t._v(" "),s("ul",[s("li",[t._v("基本父类\n"),s("ul",[s("li",[t._v("baseTag:基本字段，拥有 mysql 大部分类型，下面每一个类都需要继承 baseTag 作为父类")]),t._v(" "),s("li",[t._v("Template:此类继承 baseTag，提供注册更新和标记字段，update_field 方法可以识别")])])]),t._v(" "),s("li",[t._v("数字\n"),s("ul",[s("li",[t._v("tinyintField:tinyint 字段")]),t._v(" "),s("li",[t._v("intField:int 字段")]),t._v(" "),s("li",[t._v("bigintField:bigInt 字段")]),t._v(" "),s("li",[t._v("floatField:float 字段")]),t._v(" "),s("li",[t._v("doubleField:double 字段")])])]),t._v(" "),s("li",[t._v("时间\n"),s("ul",[s("li",[t._v("datetimeField:datetime 字段")])])]),t._v(" "),s("li",[t._v("字符\n"),s("ul",[s("li",[t._v("charField:字符字段,")]),t._v(" "),s("li",[t._v("varcharField:varchar 字段")]),t._v(" "),s("li",[t._v("textField:text 字段,")]),t._v(" "),s("li",[t._v("tinytextField:tinyText 字段,")]),t._v(" "),s("li",[t._v("longtextField:longText 字段,")])])]),t._v(" "),s("li",[t._v("特殊字段\n"),s("ul",[s("li",[t._v("boolField:布尔字段，实际以 bit 字段而来，0=False,1=True,")])])])]),t._v(" "),s("p",[s("code",[t._v("Template")]),t._v(" 作为 mysql 基本类型的父类,所有的字段类型都是从此处转发到 "),s("code",[t._v("baseTag")]),t._v(",如果我们已有的类型满足不了使用的需求,可以通过继承 baseTag 进行扩展字段的功能,baseTag 目前可接受参数有:")]),t._v(" "),s("ul",[s("li",[t._v("name:字段名")]),t._v(" "),s("li",[t._v("length:长度")]),t._v(" "),s("li",[t._v("d_point:小数点")]),t._v(" "),s("li",[t._v("t_type:类型")]),t._v(" "),s("li",[t._v("is_null:允许为空")]),t._v(" "),s("li",[t._v("primary_key:键")]),t._v(" "),s("li",[t._v("comment:注释")]),t._v(" "),s("li",[t._v("auto_field:自增长键")]),t._v(" "),s("li",[t._v("auto_time:默认设置当前时间")]),t._v(" "),s("li",[t._v("update_auto_time:默认设置当前时间并根据当前时间更新")]),t._v(" "),s("li",[t._v("default:默认值")])])])}),[],!1,null,null,null);s.default=e.exports}}]);